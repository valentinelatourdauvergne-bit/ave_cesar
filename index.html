<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CÃ©sars 2026 â€” Pronostics & Classement</title>
  <style>
    :root{
      --bg:#0f172a;--panel:#0b1220;--border:#1f2937;
      --text:#e5e7eb;--muted:#94a3b8;--accent:#22c55e
    }
    body{
      margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:radial-gradient(1200px 800px at 10% 10%,#0b1220,#0f172a);
      color:var(--text)
    }
    .container{max-width:980px;margin:0 auto;padding:24px}
    a{color:#a7f3d0;text-decoration:none}
    .card{
      background:linear-gradient(180deg,#0f172acc,#0b1220cc);
      border:1px solid var(--border);border-radius:14px;
      box-shadow:0 8px 24px rgba(0,0,0,.3);padding:18px
    }
    ul{list-style:none;padding:0} li{margin:8px 0}
    select,input[type=text]{
      width:100%;background:#0b1220;color:var(--text);
      border:1px solid var(--border);border-radius:10px;padding:10px
    }
    label{display:block;margin-bottom:6px;font-weight:600}
    .grid{display:grid;gap:14px;grid-template-columns:1fr}
    @media(min-width:700px){.grid{grid-template-columns:1fr 1fr}}
    .footer{margin-top:18px;color:var(--muted);font-size:12px}
    .btn{
      cursor:pointer;border:1px solid var(--border);color:#fff;
      background:#111827;padding:10px 14px;border-radius:10px;
      font-weight:600;display:inline-block
    }
    .btn-primary{background:linear-gradient(90deg,#22c55e,#16a34a);border:none}
    table{width:100%;border-collapse:collapse;margin-top:16px}
    th,td{border:1px solid var(--border);padding:8px;text-align:left}
    th{background:#1e293b}
  </style>
</head>
<body>
<div class="container">

<script>
/* === ParamÃ¨tres === */
const PARTICIPANTS = ["fabio","marion","alban","paul","val","lucile","oumeya"];

/* === CatÃ©gories & nommÃ©s 2026 (liste complÃ¨te) === */
const CATEGORIES = [
  ["Meilleur film", [
    "Lâ€™Attachement â€“ Carine Tardieu",
    "Dossier 137 â€“ Dominik Moll",
    "Nouvelle Vague â€“ Richard Linklater",
    "La Petite DerniÃ¨re â€“ Hafsia Herzi",
    "Un Simple Accident â€“ Jafar Panahi"
  ]],
  ["Meilleure rÃ©alisation", [
    "Carine Tardieu â€“ Lâ€™Attachement",
    "Dominik Moll â€“ Dossier 137",
    "StÃ©phane Demoustier â€“ Lâ€™Inconnu de la Grande Arche",
    "Richard Linklater â€“ Nouvelle Vague",
    "Hafsia Herzi â€“ La Petite DerniÃ¨re"
  ]],
  ["Meilleure actrice", [
    "LeÃ¯la Bekhti â€“ Ma mÃ¨re, Dieu et Sylvie Vartan",
    "Valeria Bruni Tedeschi â€“ Lâ€™Attachement",
    "LÃ©a Drucker â€“ Dossier 137",
    "Isabelle Huppert â€“ La Femme la plus riche du monde",
    "MÃ©lanie Thierry â€“ La Chambre de Mariana"
  ]],
  ["Meilleur acteur", [
    "Claes Bang â€“ Lâ€™Inconnu de la Grande Arche",
    "Bastien Bouillon â€“ Partir un jour",
    "Laurent Lafitte â€“ La Femme la plus riche du monde",
    "Pio MarmaÃ¯ â€“ Lâ€™Attachement",
    "Benjamin Voisin â€“ Lâ€™Ã‰tranger"
  ]],
  ["Meilleure actrice dans un second rÃ´le", [
    "Jeanne Balibar â€“ Nino",
    "Dominique Blanc â€“ Partir un jour",
    "Marina FoÃ¯s â€“ La Femme la plus riche du monde",
    "Jiâ€‘Min Park â€“ La Petite DerniÃ¨re",
    "Vimala Pons â€“ Lâ€™Attachement"
  ]],
  ["Meilleur acteur dans un second rÃ´le", [
    "Swann Arlaud â€“ Lâ€™Inconnu de la Grande Arche",
    "Xavier Dolan â€“ Lâ€™Inconnu de la Grande Arche",
    "Michel Fau â€“ Lâ€™Inconnu de la Grande Arche",
    "Pierre Lottin â€“ Lâ€™Ã‰tranger",
    "RaphaÃ«l Personnaz â€“ La Femme la plus riche du monde"
  ]],
  ["Meilleur espoir fÃ©minin", [
    "Manon Clavel â€“ Kika",
    "Suzanne Lindon â€“ La Venue de lâ€™avenir",
    "Nadia Melliti â€“ La Petite DerniÃ¨re",
    "Camille Rutherford â€“ Jane Austen a gÃ¢chÃ© ma vie",
    "Anja Verderosa â€“ Lâ€™Ã‰preuve du feu"
  ]],
  ["Meilleur espoir masculin", [
    "Idir Azougli â€“ MÃ©tÃ©ors",
    "Sayyid El Alami â€“ La Pampa",
    "FÃ©lix Lefebvre â€“ Lâ€™Ã‰preuve du feu",
    "Guillaume Marbeck â€“ Nouvelle Vague",
    "ThÃ©odore Pellerin â€“ Nino"
  ]],
  ["Meilleur scÃ©nario original", [
    "Dominik Moll, Gilles Marchand â€“ Dossier 137",
    "Pauline LoquÃ¨s â€“ Nino",
    "Holly Gent, Vince Palmo, MichÃ¨le Halberstadt, Laetitia Masson â€“ Nouvelle Vague",
    "Franck Dubosc, Sarah Kaminsky â€“ Un ours dans le Jura",
    "Jafar Panahi â€“ Un Simple Accident"
  ]],
  ["Meilleure adaptation", [
    "Carine Tardieu, RaphaÃ«le Moussafir, AgnÃ¨s Feuvre â€“ Lâ€™Attachement",
    "StÃ©phane Demoustier â€“ Lâ€™Inconnu de la Grande Arche",
    "Hafsia Herzi â€“ La Petite DerniÃ¨re"
  ]],
  ["Meilleure musique originale", [
    "Arnaud Toulon â€“ ARCO",
    "Olivier Marguerit â€“ Dossier 137",
    "Fatima Al Qadiri â€“ Lâ€™Ã‰tranger",
    "Alex Beaupain â€“ La Femme la plus riche du monde",
    "Amine Bouhafa â€“ La Petite DerniÃ¨re"
  ]],
  ["Meilleur son", [
    "Nicolas Becker, Andrea Ferrara, Jon Goc, Damien Lazzerini â€“ ARCO",
    "Romain Cadilhac, Marc Namblard, Olivier Touche, Olivier Goinard â€“ Le Chant des ForÃªts",
    "FranÃ§ois Maurel, Rym Debbarhâ€‘Mounir, Nathalie Vidal â€“ Dossier 137",
    "Jean Minondo, Serge Rouquairol, Christophe Vingtrinier â€“ Nouvelle Vague",
    "RÃ©mi Chanaud, Jeanne Delplancq, Fanny Martin, Niels Barletta â€“ Partir un jour"
  ]],
  ["Meilleure photographie", [
    "Elin Kirschfink â€“ Lâ€™Attachement",
    "Patrick Ghiringhelli â€“ Dossier 137",
    "Marine Atlan â€“ Lâ€™Engloutie",
    "Manu Dacosse â€“ Lâ€™Ã‰tranger",
    "David Chambille â€“ Nouvelle Vague"
  ]],
  ["Meilleur montage", [
    "Stan Collet â€“ 13 jours, 13 nuits",
    "Christel Dewynter â€“ Lâ€™Attachement",
    "Laurent Rouan â€“ Dossier 137",
    "Catherine Schwartz â€“ Nouvelle Vague",
    "GÃ©raldine Mangenot â€“ La Petite DerniÃ¨re"
  ]],
  ["Meilleurs dÃ©cors", [
    "Jeanâ€‘Philippe Moreaux â€“ Chien 51",
    "Catherine Cosme â€“ Lâ€™Inconnu de la Grande Arche",
    "Riton Dupireâ€‘ClÃ©ment â€“ Ma mÃ¨re, Dieu et Sylvie Vartan",
    "Katia Wyszkop â€“ Nouvelle Vague",
    "Marie Cheminal â€“ La Venue de lâ€™avenir"
  ]],
  ["Meilleurs costumes", [
    "CÃ©line Guignard â€“ La Condition",
    "Corinne Bruand â€“ Dracula",
    "JÃ¼rgen Doering â€“ La Femme la plus riche du monde",
    "Pascaline Chavanne â€“ Nouvelle Vague",
    "Pierreâ€‘Yves Gayraud â€“ La Venue de lâ€™avenir"
  ]],
  ["Meilleurs effets visuels", [
    "CÃ©dric Fayolle â€“ Chien 51",
    "Rodolphe Chabrier, BenoÃ®t de LonglÃ©e â€“ Lâ€™Homme qui rÃ©trÃ©cit",
    "Lise Fischer â€“ Lâ€™Inconnu de la Grande Arche",
    "Alain Carsoux â€“ Nouvelle Vague"
  ]],
  ["Meilleur film dâ€™animation (long mÃ©trage)", [
    "AmÃ©lie et la mÃ©taphysique des tubes â€“ MaÃ¯lys Vallade, Lianeâ€‘Cho Han",
    "ARCO â€“ Ugo Bienvenu",
    "La Vie de chÃ¢teau, mon enfance Ã  Versailles â€“ ClÃ©mence Madeleineâ€‘Perdrillat, Nathaniel Hâ€™Limi"
  ]],
  ["Meilleur film documentaire", [
    "Ã€ Bicyclette ! â€“ Mathias Mlekuz",
    "Le Chant des ForÃªts â€“ Vincent Munier",
    "Le CinquiÃ¨me Plan de La JetÃ©e â€“ Dominique Cabrera",
    "Personne nâ€™y comprend rien â€“ Yannick Kergoat",
    "Put Your Soul On Your Hand And Walk â€“ Sepideh Farsi"
  ]],
  ["Meilleur premier film", [
    "ARCO â€“ Ugo Bienvenu",
    "Lâ€™Ã‰preuve du feu â€“ AurÃ©lien Peyre",
    "Nino â€“ Pauline LoquÃ¨s",
    "La Pampa â€“ Antoine Chevrollier",
    "Partir un jour â€“ AmÃ©lie Bonnin"
  ]],
  ["Meilleur film Ã©tranger", [
    "Lâ€™Agent secret â€“ Kleber MendonÃ§a Filho",
    "Black Dog â€“ Guan Hu",
    "SirÄt â€“ Oliver Laxe",
    "Une bataille aprÃ¨s lâ€™autre â€“ Paul Thomas Anderson",
    "Valeur sentimentale â€“ Joachim Trier"
  ]],
  ["Meilleur court mÃ©trage dâ€™animation", [
    "Les Belles Cicatrices â€“ RaphaÃ«l Jouzeau",
    "Dieu est timide â€“ Jocelyn Charles",
    "Fille de lâ€™eau â€“ Sandra DesmaziÃ¨res"
  ]],
  ["Meilleur court mÃ©trage documentaire", [
    "Au bain des dames â€“ Margaux Fournier",
    "Car Wash â€“ LaÃ¯s Decaster",
    "Ni Dieu ni PÃ¨re â€“ Paul Kermarec"
  ]],
  ["Meilleur court mÃ©trage de fiction", [
    "Big Boys Donâ€™t Cry â€“ Arnaud Delmarle",
    "Deux personnes Ã©changeant de la salive â€“ Natalie Musteata, Alexandre Singh",
    "Mort dâ€™un acteur â€“ Ambroise Rateau",
    "Wonderwall â€“ RÃ³isÃ­n Burns"
  ]]
];

/* === Utilitaires URL/Storage === */
const qs = k => new URLSearchParams(location.search).get(k)||"";
const view = (qs('view')||'').toLowerCase();  // '', 'gagnants', 'classement'
const p = (qs('participant')||'').trim().toLowerCase();
const WINNERS_KEY = 'cesars2026_gagnants';
const storeKey = name => `cesars2026_${name}`;

/* Lire/Ã©crire gagnants (objet: {cat -> string}) */
const loadWinners = () => JSON.parse(localStorage.getItem(WINNERS_KEY)||'{}');
const saveWinners = obj => localStorage.setItem(WINNERS_KEY, JSON.stringify(obj));

/* Lire les pronostics d'un participant (objet: {cat: {coeur, realiste}}) */
const loadVotes = name => JSON.parse(localStorage.getItem(storeKey(name))||'{}');

/* Calcul des points selon rÃ¨gle :
   - 2 pts si rÃ©aliste = gagnant
   - +1 pt si coeur = rÃ©aliste (bonus), donc max 3 */
function scoreParticipant(name, winners){
  const votes = loadVotes(name);
  let total = 0;
  CATEGORIES.forEach(([cat])=>{
    const v = votes[cat]||{};
    if (v.realiste && winners[cat] && v.realiste === winners[cat]) {
      total += 2;
      if (v.coeur && v.coeur === v.realiste) total += 1;
    }
  });
  return total;
}
</script>

<!-- ====== VUE : Liste participants ====== -->
<div id="view-list" class="card" style="display:none">
  <h1 style="margin:0 0 8px">Participants</h1>
  <p>Choisir un nom pour ouvrir sa page de pronostics :</p>
  <ul id="plist"></ul>

  <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
    <a class="btn" href="./?view=gagnants">ğŸ† DÃ©clarer les gagnants</a>
    <a class="btn btn-primary" href="./?view=classement">ğŸ“Š Classement gÃ©nÃ©ral</a>
  </div>

  <div class="footer">
    Astuce : tu peux aussi ouvrir directement une fiche avec <code>?participant=prenom</code>
    (exÂ : <code>?participant=val</code>).
  </div>
</div>

<!-- ====== VUE : Fiche participant ====== -->
<div id="view-participant" class="card" style="display:none">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
    <h1 id="ptitle" style="margin:0">Pronostics</h1>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a class="btn" href="./">â† Liste</a>
      <a class="btn" href="./?view=classement">ğŸ“Š Classement</a>
      <a class="btn" href="./?view=gagnants">ğŸ† Gagnants</a>
    </div>
  </div>
  <p id="psub" style="color:var(--muted);margin-top:6px"></p>

  <div id="cats"></div>
  <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
    <button id="saveBtn" class="btn btn-primary">ğŸ’¾ Enregistrer</button>
    <button id="clearBtn" class="btn">ğŸ—‘ï¸ Effacer mes choix</button>
    <button id="exportBtn" class="btn">â¬‡ï¸ Exporter (JSON)</button>
  </div>
</div>

<!-- ====== VUE : DÃ©clarer les gagnants ====== -->
<div id="view-winners" class="card" style="display:none">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
    <h1 style="margin:0">ğŸ† DÃ©clarer les gagnants</h1>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a class="btn" href="./">â† Liste</a>
      <a class="btn" href="./?view=classement">ğŸ“Š Classement</a>
    </div>
  </div>
  <p class="footer">Tout le monde peut Ã©diter ces sÃ©lections (stockÃ©es localement dans ce navigateur).</p>
  <div id="winnersPanel"></div>
  <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
    <button id="saveWinnersBtn" class="btn btn-primary">ğŸ’¾ Enregistrer les gagnants</button>
    <button id="clearWinnersBtn" class="btn">ğŸ—‘ï¸ Effacer / RÃ©initialiser</button>
  </div>
</div>

<!-- ====== VUE : Classement gÃ©nÃ©ral ====== -->
<div id="view-ranking" class="card" style="display:none">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
    <h1 style="margin:0">ğŸ“Š Classement gÃ©nÃ©ral</h1>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a class="btn" href="./">â† Liste</a>
      <a class="btn" href="./?view=gagnants">ğŸ† Gagnants</a>
    </div>
  </div>
  <p class="footer">Classement calculÃ© localement Ã  partir des choix enregistrÃ©s dans ce navigateur.</p>
  <div id="rankingPanel"></div>
  <div style="margin-top:10px">
    <button id="recalcBtn" class="btn">â†» Recalculer</button>
  </div>
</div>

<!-- ====== TEMPLATES ====== -->
<template id="cat-template">
  <div style="border-top:1px dashed var(--border);padding-top:12px;margin-top:10px">
